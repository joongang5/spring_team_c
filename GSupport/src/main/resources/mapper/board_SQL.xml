<?xml version="1.0"	encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper	namespace="board">

	<select	id="boardList" resultType="HashMap">
		SELECT * FROM board_view
		WHERE board_category = #{boardNo}
		<if test="searchName == 'title' and search != null">
			AND board_title LIKE CONCAT('%', #{search}, '%')
		</if> 
		<if test="searchName == 'content' and search != null">
			AND board_content LIKE CONCAT('%', #{search}, '%')
		</if> 
		<if test="searchName == 'writer' and search != null">
			AND member_id LIKE CONCAT('%', #{search}, '%')
		</if> 
		limit #{startPage}, #{lastPage}
	</select>
	
	<select	id="totalCount" parameterType="HashMap" resultType="HashMap">
		SELECT COUNT(*) as totalCount FROM board_view
		<if test="searchName == 'title' and search != null">
			AND board_title LIKE CONCAT('%', #{search}, '%')
		</if> 
		<if test="searchName == 'content' and search != null">
			AND board_content LIKE CONCAT('%', #{search}, '%')
		</if> 
		<if test="searchName == 'writer' and search != null">
			AND member_id LIKE CONCAT('%', #{search}, '%')
		</if>
	</select>
	
</mapper>