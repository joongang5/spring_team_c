<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"	
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="store">
	
	<select id="jongnoStoreList" parameterType="HashMap" resultType="HashMap">
		SELECT * FROM shop WHERE shop_loc LIKE '%종로구%' LIMIT 0, 20
	</select>
	
	<select id="storeDetail" parameterType="HashMap" resultType="HashMap">
		SELECT * FROM shop WHERE shop_no=#{shop_no}
	</select>
	
	<insert id="storeReserv" parameterType="HashMap">
		INSERT INTO reservation (user, shop_no, reservation_reservDate, reservation_reservTime, reservation_phonenum, people, reservation_reservRequest, member_name) 
		VALUES ((SELECT member_no FROM member WHERE member_id=#{id}), #{shop_no}, #{date}, #{reservTime}, #{phoneNum}, #{people}, #{reservRequest}, #{name})
	</insert>
	
	<select id="storeList" parameterType="HashMap" resultType="HashMap">
		SELECT * FROM shop WHERE shop_gu=#{guName} LIMIT #{startPage}, #{lastPage}
	</select>
	
	<select id="storeGuList" parameterType="HashMap" resultType="HashMap">
		SELECT * FROM shop_gu 
	</select>
	
	<select id="totalCount" parameterType="HashMap" resultType="HashMap">
		SELECT count(*) as totalCount FROM shop WHERE shop_gu=#{guName}
	</select>
	
</mapper>
